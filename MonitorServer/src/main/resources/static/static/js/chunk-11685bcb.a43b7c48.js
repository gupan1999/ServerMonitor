(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11685bcb"],{"0076":function(e,t,n){"use strict";n("cfbc")},"16ab":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-button",{attrs:{type:"info"},on:{click:e.getList}},[n("i",{staticClass:"el-icon-refresh"}),e._v(" 同步 ")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"ID",prop:"userId",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.userId))])]}}])}),n("el-table-column",{attrs:{label:"Name",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.username))])]}}])}),n("el-table-column",{attrs:{label:"Org",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.userOrg))])]}}])}),n("el-table-column",{attrs:{label:"Links","min-width":"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.serverNames))])]}}])}),n("el-table-column",{attrs:{label:"Actions",align:"center",width:"300px","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.startBind(a)}}},[e._v(" 绑定 ")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.startUnbind(a)}}},[e._v(" 解绑 ")])]}}])})],1),n("el-dialog",{attrs:{title:e.textMap1[e.dialogStatus1],visible:e.dialogFormVisible1},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[n("el-form",{ref:"bindForm",attrs:{rules:e.bindRule,"label-width":"150px","label-position":"left"}},[n("el-form-item",{attrs:{label:"serverName",prop:"serverName"}},["unbind"===e.dialogStatus1?n("el-select",{attrs:{placeholder:"服务器"},model:{value:e.link.serverName,callback:function(t){e.$set(e.link,"serverName",t)},expression:"link.serverName"}},e._l(e.endpoint.serverNames,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1):"bind"===e.dialogStatus1?n("el-select",{attrs:{placeholder:"服务器"},model:{value:e.link.serverName,callback:function(t){e.$set(e.link,"serverName",t)},expression:"link.serverName"}},e._l(e.serverNames,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1):e._e()],1)],1),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible1=!1}}},[e._v(" 取消 ")]),n("el-button",{attrs:{type:"danger"},on:{click:function(t){"bind"===e.dialogStatus1?e.handleBind():e.handleUnbind()}}},[e._v(" 确定 ")])],1)],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.pageArgs.page,limit:e.pageArgs.limit},on:{"update:page":function(t){return e.$set(e.pageArgs,"page",t)},"update:limit":function(t){return e.$set(e.pageArgs,"limit",t)},pagination:e.getList}})],1)},i=[],r=(n("9911"),n("aa22")),s=n("ed08"),o=n("333d"),l=n("c24f"),u={name:"ComplexTable2",components:{Pagination:o["a"]},filters:{parseTime:s["c"]},data:function(){return{endpoint:{userId:"",username:"",userOrg:"",serverNames:[]},link:{userId:"",serverName:""},pageArgs:{page:1,limit:20},total:0,list:[],listLoading:!0,dialogVisible:!1,defaultProps:{children:"children",label:"title"},tableKey:0,bindRule:{userId:[{required:!0,message:"endpointId is required",trigger:"blur"}],serverName:[{required:!0,message:"taskId is required",trigger:"blur"}]},dialogFormVisible:!1,dialogFormVisible1:!1,dialogStatus:"",dialogStatus1:"",textMap1:{bind:"绑定",unbind:"解绑"}}},created:function(){this.getList()},methods:{handleDate:function(){var e=1e3*new Date(this.task.start)/1e3;e<Date.now()&&(this.task.start=new Date)},getList:function(){var e=this;this.listLoading=!0,Object(l["b"])(this.pageArgs).then((function(t){null===t.data.data?e.list=[]:(e.list=t.data.data.links,e.total=t.data.data.total),e.listLoading=!1}))},resetEndpoint:function(){this.endpoint={id:"",name:"",org:"",serviceNames:[]}},resetLink:function(){this.link={userId:"",serverName:""}},itemChange:function(e,t,n){console.log("获取数据值，重新赋值",e,t,n),this.link.serverName=e},startBind:function(e){var t=this;this.resetLink(),this.endpoint=Object.assign({},e),this.dialogStatus1="bind",this.dialogFormVisible1=!0,this.link.userId=e.userId,this.serverNames=Object(s["b"])(this.serverNames,this.endpoint.serverNames),Object(r["c"])().then((function(e){t.serverNames=e.data.data.serverNames})),this.$nextTick((function(){t.$refs["bindForm"].clearValidate()}))},handleBind:function(){var e=this;Object(l["a"])(this.link).then((function(){e.$notify({title:"成功",message:"绑定成功",type:"success",duration:2e3}),e.dialogFormVisible1=!1,e.getList()}))},startUnbind:function(e){var t=this;this.resetLink(),this.endpoint=Object.assign({},e),this.dialogStatus1="unbind",this.dialogFormVisible1=!0,this.link.userId=e.userId,this.$nextTick((function(){t.$refs["bindForm"].clearValidate()}))},handleUnbind:function(){var e=this;Object(l["f"])(this.link).then((function(){e.$notify({title:"成功",message:"解绑成功",type:"success",duration:2e3}),e.dialogFormVisible1=!1,e.getList()}))}}},c=u,d=n("2877"),p=Object(d["a"])(c,a,i,!1,null,null,null);t["default"]=p.exports},"333d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({attrs:{align:"center",background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[];n("a9e3");Math.easeInOutQuad=function(e,t,n,a){return e/=a/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function s(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,n){var a=o(),i=e-a,l=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=l;var o=Math.easeInOutQuad(u,a,i,t);s(o),u<t?r(e):n&&"function"===typeof n&&n()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},c=u,d=(n("0076"),n("2877")),p=Object(d["a"])(c,a,i,!1,null,"d8cae1c4",null);t["a"]=p.exports},"857a":function(e,t,n){var a=n("1d80"),i=/"/g;e.exports=function(e,t,n,r){var s=String(a(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(r).replace(i,"&quot;")+'"'),o+">"+s+"</"+t+">"}},9911:function(e,t,n){"use strict";var a=n("23e7"),i=n("857a"),r=n("af03");a({target:"String",proto:!0,forced:r("link")},{link:function(e){return i(this,"a","href",e)}})},aa22:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return l}));var a=n("b775");function i(e){return Object(a["a"])({url:"/server/fetch",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/server/avail",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/server/available",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/server/stop",method:"post",params:e})}function l(e){return Object(a["a"])({url:"/server/start",method:"post",params:e})}},af03:function(e,t,n){var a=n("d039");e.exports=function(e){return a((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},cfbc:function(e,t,n){},ed08:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var a=n("b85c"),i=n("53ca");n("ac1f"),n("00b4"),n("5319"),n("4d63"),n("2c3e"),n("25f0"),n("d3b7"),n("4d90"),n("a15b"),n("d81d"),n("b64b"),n("1276"),n("159b"),n("7039"),n("6062"),n("3ca3"),n("ddb0");function r(e,t){if(0===arguments.length||!e)return null;var n,a=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(i["a"])(e)?n=e:("string"===typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e):e.replace(new RegExp(/-/gm),"/")),"number"===typeof e&&10===e.toString().length&&(e*=1e3),n=new Date(e));var r={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},s=a.replace(/{([ymdhisa])+}/g,(function(e,t){var n=r[t];return"a"===t?["日","一","二","三","四","五","六"][n]:n.toString().padStart(2,"0")}));return s}function s(e,t,n){var a,i,r,s,o,l=function l(){var u=+new Date-s;u<t&&u>0?a=setTimeout(l,t-u):(a=null,n||(o=e.apply(r,i),a||(r=i=null)))};return function(){for(var i=arguments.length,u=new Array(i),c=0;c<i;c++)u[c]=arguments[c];r=this,s=+new Date;var d=n&&!a;return a||(a=setTimeout(l,t)),d&&(o=e.apply(r,u),r=u=null),o}}function o(e,t){var n,i=new Set(e),r=new Set(t),s=[],o=Object(a["a"])(i);try{for(o.s();!(n=o.n()).done;){var l=n.value;r.has(l)||s.push(l)}}catch(u){o.e(u)}finally{o.f()}return s}}}]);